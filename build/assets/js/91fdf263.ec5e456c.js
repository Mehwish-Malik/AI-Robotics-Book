"use strict";(self.webpackChunkhumanoid_robotics_book=self.webpackChunkhumanoid_robotics_book||[]).push([[574],{6720:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"tutorials/basic-control-examples/joint-control-basics","title":"Joint Control Basics","description":"Overview","source":"@site/docs/tutorials/basic-control-examples/joint-control-basics.md","sourceDirName":"tutorials/basic-control-examples","slug":"/tutorials/basic-control-examples/joint-control-basics","permalink":"/AI-Robotics-Book/docs/tutorials/basic-control-examples/joint-control-basics","draft":false,"unlisted":false,"editUrl":"https://github.com/Mehwish-Malik/AI-Robotics-Book/tree/main/docs/tutorials/basic-control-examples/joint-control-basics.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2}}');var o=n(4848),i=n(8453);const s={sidebar_position:2},l="Joint Control Basics",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Joint Control Modes",id:"joint-control-modes",level:2},{value:"Position Control",id:"position-control",level:3},{value:"Velocity Control",id:"velocity-control",level:3},{value:"Torque Control",id:"torque-control",level:3},{value:"PID Control Implementation",id:"pid-control-implementation",level:2},{value:"Safety and Limits",id:"safety-and-limits",level:2},{value:"Multi-Joint Coordination",id:"multi-joint-coordination",level:2},{value:"Practical Example: Joint Trajectory Following",id:"practical-example-joint-trajectory-following",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Exercises",id:"exercises",level:2}];function d(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"joint-control-basics",children:"Joint Control Basics"})}),"\n",(0,o.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(r.p,{children:"Joint control is fundamental to humanoid robotics, enabling precise movement and positioning of robot limbs. This tutorial covers the essential concepts of joint control including position, velocity, and torque control methods."}),"\n",(0,o.jsx)(r.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,o.jsx)(r.p,{children:"By the end of this tutorial, you will be able to:"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"Understand different joint control modes"}),"\n",(0,o.jsx)(r.li,{children:"Implement basic PID control for joint positioning"}),"\n",(0,o.jsx)(r.li,{children:"Apply torque control for compliant behavior"}),"\n",(0,o.jsx)(r.li,{children:"Design safety limits for joint control"}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"joint-control-modes",children:"Joint Control Modes"}),"\n",(0,o.jsx)(r.h3,{id:"position-control",children:"Position Control"}),"\n",(0,o.jsx)(r.p,{children:"Position control is the most common control mode where the controller commands a specific joint angle:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-python",children:'import numpy as np\r\n\r\ndef position_control(current_pos, desired_pos, kp=100.0, max_torque=50.0):\r\n    """\r\n    Simple position control using proportional control\r\n    """\r\n    error = desired_pos - current_pos\r\n    torque = kp * error\r\n    return np.clip(torque, -max_torque, max_torque)\r\n\r\n# Example usage\r\ncurrent_angle = 0.5  # radians\r\ntarget_angle = 1.0   # radians\r\ntorque_command = position_control(current_angle, target_angle)\r\nprint(f"Torque command: {torque_command:.2f} Nm")\n'})}),"\n",(0,o.jsx)(r.h3,{id:"velocity-control",children:"Velocity Control"}),"\n",(0,o.jsx)(r.p,{children:"Velocity control commands a specific joint velocity:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-python",children:'def velocity_control(current_vel, desired_vel, kp=10.0, max_torque=50.0):\r\n    """\r\n    Simple velocity control\r\n    """\r\n    error = desired_vel - current_vel\r\n    torque = kp * error\r\n    return np.clip(torque, -max_torque, max_torque)\n'})}),"\n",(0,o.jsx)(r.h3,{id:"torque-control",children:"Torque Control"}),"\n",(0,o.jsx)(r.p,{children:"Torque control directly commands the output torque:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-python",children:'def torque_control(desired_torque, max_torque=50.0):\r\n    """\r\n    Direct torque control with limits\r\n    """\r\n    return np.clip(desired_torque, -max_torque, max_torque)\n'})}),"\n",(0,o.jsx)(r.h2,{id:"pid-control-implementation",children:"PID Control Implementation"}),"\n",(0,o.jsx)(r.p,{children:"PID (Proportional-Integral-Derivative) control provides more sophisticated control:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-python",children:"class PIDController:\r\n    def __init__(self, kp, ki, kd, output_limits=(-100, 100)):\r\n        self.kp = kp\r\n        self.ki = ki\r\n        self.kd = kd\r\n        self.output_limits = output_limits\r\n\r\n        self.previous_error = 0\r\n        self.integral = 0\r\n        self.previous_time = None\r\n\r\n    def update(self, setpoint, measurement, dt=None):\r\n        current_time = time.time()\r\n\r\n        if dt is None and self.previous_time is not None:\r\n            dt = current_time - self.previous_time\r\n        elif dt is None:\r\n            dt = 0.001  # Default time step\r\n\r\n        error = setpoint - measurement\r\n\r\n        # Proportional term\r\n        p_term = self.kp * error\r\n\r\n        # Integral term\r\n        self.integral += error * dt\r\n        i_term = self.ki * self.integral\r\n\r\n        # Derivative term\r\n        if dt > 0:\r\n            derivative = (error - self.previous_error) / dt\r\n        else:\r\n            derivative = 0\r\n        d_term = self.kd * derivative\r\n\r\n        # Calculate output\r\n        output = p_term + i_term + d_term\r\n\r\n        # Apply output limits\r\n        output = np.clip(output, self.output_limits[0], self.output_limits[1])\r\n\r\n        # Store values for next iteration\r\n        self.previous_error = error\r\n        self.previous_time = current_time\r\n\r\n        return output\r\n\r\n# Example: Controlling a joint to reach a target position\r\npid = PIDController(kp=200, ki=50, kd=10)\r\n\r\ndef control_joint_to_position(joint_id, target_pos, current_pos, dt):\r\n    torque = pid.update(target_pos, current_pos, dt)\r\n    # Apply torque to joint (implementation depends on your robot interface)\r\n    return torque\n"})}),"\n",(0,o.jsx)(r.h2,{id:"safety-and-limits",children:"Safety and Limits"}),"\n",(0,o.jsx)(r.p,{children:"Implementing safety limits is crucial for safe operation:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-python",children:'class JointSafetyLimits:\r\n    def __init__(self, min_pos, max_pos, max_vel, max_torque):\r\n        self.min_pos = min_pos\r\n        self.max_pos = max_pos\r\n        self.max_vel = max_vel\r\n        self.max_torque = max_torque\r\n\r\n    def check_safety(self, pos, vel, torque):\r\n        """\r\n        Check if joint state is within safe limits\r\n        """\r\n        if pos < self.min_pos or pos > self.max_pos:\r\n            return False, "Position limit exceeded"\r\n\r\n        if abs(vel) > self.max_vel:\r\n            return False, "Velocity limit exceeded"\r\n\r\n        if abs(torque) > self.max_torque:\r\n            return False, "Torque limit exceeded"\r\n\r\n        return True, "Safe"\r\n\r\n# Example usage\r\nsafety_limits = JointSafetyLimits(\r\n    min_pos=-np.pi,\r\n    max_pos=np.pi,\r\n    max_vel=5.0,  # rad/s\r\n    max_torque=100.0  # Nm\r\n)\r\n\r\ndef safe_joint_control(joint_pos, joint_vel, target_pos):\r\n    # Calculate control torque\r\n    torque = position_control(joint_pos, target_pos)\r\n\r\n    # Check safety limits\r\n    is_safe, message = safety_limits.check_safety(joint_pos, joint_vel, torque)\r\n\r\n    if not is_safe:\r\n        print(f"SAFETY ISSUE: {message}")\r\n        return 0.0  # Return zero torque for safety\r\n\r\n    return torque\n'})}),"\n",(0,o.jsx)(r.h2,{id:"multi-joint-coordination",children:"Multi-Joint Coordination"}),"\n",(0,o.jsx)(r.p,{children:"Controlling multiple joints requires coordination:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-python",children:'class MultiJointController:\r\n    def __init__(self, num_joints):\r\n        self.num_joints = num_joints\r\n        self.pid_controllers = [PIDController(100, 10, 5) for _ in range(num_joints)]\r\n        self.safety_limits = [JointSafetyLimits(-np.pi, np.pi, 5.0, 100.0) for _ in range(num_joints)]\r\n\r\n    def control_joints(self, current_positions, target_positions, dt=0.001):\r\n        """\r\n        Control multiple joints simultaneously\r\n        """\r\n        torques = []\r\n\r\n        for i in range(self.num_joints):\r\n            # Calculate torque for this joint\r\n            torque = self.pid_controllers[i].update(target_positions[i], current_positions[i], dt)\r\n\r\n            # Check safety limits\r\n            is_safe, _ = self.safety_limits[i].check_safety(\r\n                current_positions[i],\r\n                0,  # Simplified velocity check\r\n                torque\r\n            )\r\n\r\n            if not is_safe:\r\n                torque = 0  # Emergency stop for this joint\r\n\r\n            torques.append(torque)\r\n\r\n        return np.array(torques)\r\n\r\n# Example: Controlling a 6-DOF arm\r\narm_controller = MultiJointController(6)\r\ncurrent_arm_pos = np.array([0.1, 0.2, 0.3, 0.4, 0.5, 0.6])\r\ntarget_arm_pos = np.array([0.5, 0.5, 0.5, 0.5, 0.5, 0.5])\r\n\r\narm_torques = arm_controller.control_joints(current_arm_pos, target_arm_pos)\r\nprint(f"Arm joint torques: {arm_torques}")\n'})}),"\n",(0,o.jsx)(r.h2,{id:"practical-example-joint-trajectory-following",children:"Practical Example: Joint Trajectory Following"}),"\n",(0,o.jsx)(r.p,{children:"Implementing smooth trajectory following:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-python",children:'def generate_minimal_jerk_trajectory(start_pos, end_pos, duration, dt=0.001):\r\n    """\r\n    Generate a minimal jerk trajectory between two positions\r\n    """\r\n    t_total = duration\r\n    t = np.arange(0, t_total, dt)\r\n\r\n    # Minimal jerk trajectory formula\r\n    trajectory = []\r\n    for ti in t:\r\n        if ti >= t_total:\r\n            trajectory.append(end_pos)\r\n        else:\r\n            ratio = ti / t_total\r\n            s = 10 * ratio**3 - 15 * ratio**4 + 6 * ratio**5\r\n            pos = start_pos + (end_pos - start_pos) * s\r\n            trajectory.append(pos)\r\n\r\n    return np.array(trajectory)\r\n\r\n# Example: Smooth joint movement\r\nstart_angle = 0.0\r\nend_angle = np.pi/2  # 90 degrees\r\nmovement_time = 2.0  # seconds\r\n\r\ntrajectory = generate_minimal_jerk_trajectory(start_angle, end_angle, movement_time)\r\n\r\n# Follow the trajectory\r\ncurrent_pos = start_angle\r\ndt = 0.001\r\npid = PIDController(kp=150, ki=25, kd=8)\r\n\r\nfor i, desired_pos in enumerate(trajectory):\r\n    torque = pid.update(desired_pos, current_pos, dt)\r\n    # In a real system, you would apply this torque to the joint\r\n    # and measure the new position\r\n    print(f"Time: {i*dt:.3f}s, Desired: {desired_pos:.3f}, Torque: {torque:.3f}")\r\n\r\n    # Update current position (simplified model)\r\n    current_pos += torque * dt * 0.01  # Simplified dynamics\n'})}),"\n",(0,o.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsxs)(r.ol,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Always implement safety limits"})," to prevent damage to the robot or environment"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Use appropriate control gains"})," - too high can cause instability, too low can cause poor performance"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Consider the robot's dynamics"})," when designing controllers"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Test thoroughly"})," in simulation before real robot deployment"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Implement graceful degradation"})," when safety limits are reached"]}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"exercises",children:"Exercises"}),"\n",(0,o.jsxs)(r.ol,{children:["\n",(0,o.jsx)(r.li,{children:"Implement a joint controller that smoothly moves from one position to another using a trapezoidal velocity profile."}),"\n",(0,o.jsx)(r.li,{children:"Add velocity and acceleration feedback to improve the PID controller performance."}),"\n",(0,o.jsx)(r.li,{children:"Create a safety system that monitors joint temperatures and reduces control gains when overheating is detected."}),"\n"]})]})}function p(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>l});var t=n(6540);const o={},i=t.createContext(o);function s(e){const r=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(i.Provider,{value:r},e.children)}}}]);